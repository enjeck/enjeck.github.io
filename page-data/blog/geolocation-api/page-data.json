{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/blog/geolocation-api/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Enjeck's Personal Website","author":"Enjeck Cleopatra"}},"mdx":{"id":"e666067d-dd13-59d0-bd0c-d5671833a358","excerpt":"Knowing a user's location can be a very important feature of a web app. \nYou can use the location information to personalise the user experience,\ngive usersâ€¦","frontmatter":{"title":"How to get a someone's location using the Geolocation API","date":"September 25, 2021"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"How to get a someone's location using the Geolocation API\",\n  \"date\": \"2021-09-25\",\n  \"categories\": [\"html\", \"javascript\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Knowing a user\\u2019s location can be a very important feature of a web app.\\nYou can use the location information to personalise the user experience,\\ngive users directions, suggest friends or events in a person\\u2019s locality, or to\\npower a particular feature. \"), mdx(\"p\", null, \"Whenever you want to build web pages that are location-aware,\\nJavaScript\\u2019s Geolocation API is great tool. If the user permits\\n(the user give the browser permission to access their location), you can pinpoint\\ntheir city, or even more precisely, the street they live in.\"), mdx(\"p\", null, \"Don\\u2019t confuse the Geolocation API with Google Maps.\\nThey are different in many ways. Google Maps API is a library that provides access\\nto Google Maps features like displaying location in a map, or giving directions.\\nWhereas, the Geolocation API\\u2019s primary purpose is to give information about a person\\u2019s\\nposition on Earth. \"), mdx(\"h3\", null, \"How the Geolocation API works\"), mdx(\"p\", null, \"To get a person\\u2019s location, the Geolocation API relies on latitudes and longitudes making a coordinate system.\\nLatitudes and longitudes are imaginary lines (you\\u2019ll see them drawn on globes) that cover\\nthe earth and help with positioning. Latitudes indicate northern/southern points on the\\nEarth, and longitude eastern/western. Every place on Earth has a longitude/latitude value\\ncorresponding to its position on planet Earth. For example, New York City is somewhere around\\nlatitude 40 and longitude -70.\"), mdx(\"p\", null, \"Not only smartphones are location-aware.\\nNowadays, almost every eleectronic device can be made location-aware, even a desktop computer.\\nYou may be wondering how a browser running on a desktop computer can determine its location\\nwhen it doesn\\u2019t have a GPS. Browsers have other ways of  finding location without the use of\\nlocation technologies like GPS.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"GPS (Global Positioning System)\"), \": Mainly used by modern mobile devices, it can provide\\nhigh-accuracy location information. It uses satellites and can also provide information on altitude and wind speed. \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"IP Address\"), \": Every device on the internet has an IP Address. This IP can be mapped to an\\nexternal database to derive a person\\u2019s physical location. This method can work anywhere,\\nbut is is not very accurate. \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Cell phone triangulation\"), \": This approach uses your distance from cell phone towers to\\ncalculate your location. It is pretty accurate, and has the advantage of working indoors,\\nunlike GPS. \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"WiFi\"), \": Wi-Fi positioning is based on using access points to triangulate location.\\nIt is accurate, fast and can work indoors. \")), mdx(\"p\", null, \"When building basic geolocation web apps, you don\\u2019t have to concern yourself with all these\\nvarious geolocation tactics. Different browsers handle it in their own way. \"), mdx(\"p\", null, \"Let\\u2019s begin using the Geolocation API. We\\u2019ll try to find out where you are (or at least, where your\\nbrowser thinks you are). \"), mdx(\"p\", null, \"Save the following starter HTML code in a file. \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-html\"\n  }, \"<!doctype html>\\n  <html>\\n  <head>\\n    <meta charset=\\\"utf-8\\\">\\n    <title>My Location</title>\\n    <script src=\\\"location.js\\\"></script>\\n    <link rel=\\\"stylesheet\\\" href=\\\"myLoc.css\\\">\\n  </head>\\n  <body>\\n    <div id=\\\"location\\\">\\n    </div>\\n  </body>\\n  </html>\\n\")), mdx(\"p\", null, \"Go ahead a create \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"location.js\"), \" file, inside of which we will write the actual Geolocation code:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"/* Call the function after the page is done loading. */\\nwindow.onload = myLocation;\\n\\nfunction myLocation() {\\n\\n/* Check if the browser supports the Geolocation API. If it does, then \\nthe geolocation property exists, and the condition evaluates to true. The \\nnavigator.geolocation property is an object that contains the whole geolocation API */\\n  if (navigator.geolocation){\\n    /* Call the getCurrentPosition method and pass it a function, showLocation, which \\n    we shall soon implement. An API is basically an object with properties and methods. \\n    The Geolocation API has the getCurrentPosition method, which handles the job of getting \\n    the browser's location.*/ \\n    navigator.geolocation.getCurrentPosition(showLocation);\\n  }\\n  else {\\n    // If there's no geolocation support, show an alert\\n    alert(\\\"Sorry, your browser does not support geolocation.\\\"); \\n  }\\n}\\n\\n/* This function is passed a position, containing latitude and longitude values */\\nfunction showLocation(position){ \\n/* Get the latitude and longitude from the position.coords object */\\nconst latitude = position.coords.latitude;\\nconst.longitude = position.coords.longitude;\\n// Show the location on the page\\ndocument.getElementById(\\\"location\\\").innerHTML = \\n\\\"You are at Latitude: \\\" + latitude +  \\\", Longitude: \\\" + longitude;\\n}\\n\")), mdx(\"p\", null, \"When you run this code (or any other code using the Geolocation API) for the first time,\\nthe browser requests to access your permission. This security check is for privacy reasons,\\npreventing a malicious app from accessing your location without the user\\u2019s permission. \"), mdx(\"p\", null, \"That\\u2019s it. We\\u2019re done with  getting the user\\u2019s location. \"), mdx(\"h3\", null, \"A bit more about the getCurrentPostion() method\"), mdx(\"p\", null, \"Although not shown in the previous code, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getCurrentPostion\"), \" method can take three parameters.\\nThe last two parameters are optional:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"getCurrentPosition(successHandler, errorHandler, options);\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"successHandler\"), \" function is called if the browser successfully gets your location. \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"errorHandler\"), \" isIt accepts parameters \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"enableHighAccuracy\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"timeout\"), \" (the maximum time the browser can\\ntake to determine its location), \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"maximumAge\"), \" (the oldest age a location value can reach, after\\nwhich, the browser needs always recalculate the location\\nwhenever getCurrentPostion is called. called if the browser can\\u2019t determine your location. \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"options\"), \" parameter is used for controlling how the geolocation computes its value.  \")), mdx(\"p\", null, \"In the previous example, we called the geolocation object\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getCurrentPosition\"), \" method with\\nan a success handler (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"showLocation\"), \") function. When our success handler, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"showLocation\"), \",\\nis called, it is passed a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"position\"), \" object containing a coordinates object holding the\\nlongitude and latitude, as well as other information about the browser\\u2019s location.\\nThe \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"position\"), \" object has a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"coords\"), \" property, which can be used to reference the\\nlatitudes and longitudes. \"), mdx(\"p\", null, \"It works like this: \"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"First, the browser call \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"getCurrentPostion\"), \", which triggers the geolocation API\\nto ask the user for permission to access location. \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"If the user accepts, geolocation attempts to get the browser\\u2019s location\\n(via means such as GPS, triangulation, etc discussed earlier), and if successful, it calls\\nthe success handler (\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"showLocation\"), \", in the example), and passes it an object with the\\ncoordinates. \")));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"/blog/geolocation-api/","previous":null,"next":{"id":"3840f9e2-4d44-5fc5-b1c9-4e64aa38417d","fields":{"slug":"/blog/distance-two-locations/"},"frontmatter":{"title":"How to calculate the distance between two locations using JavaScript"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"How to calculate the distance between two locations using JavaScript\",\n  \"date\": \"2021-09-25\",\n  \"categories\": [\"html\", \"javascript\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"The most popular way of calculating the distance between two points on a\\nsphere is using the Haversine equation.\\nIf you have the coordinates (that is; longitude and latitude) of the the starting and\\ndestination locations, you can use this equation to calculate it.\\nHere\\u2019s how to do calculate the distance in kilometers between two locations using\\nJavaScript and the geolocation API. \"), mdx(\"p\", null, \"By default, coordinates (gotten using the Geolocation API) are given in degrees.\\nWe need them in radians for the formula. Here\\u2019s our conversion function: \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"// Convert from degrees to radians\\nfunction degreesToRadians(degrees) {\\n  var radians = (degrees * Math.PI)/180;\\n  return radians;\\n}\\n\")), mdx(\"p\", null, \"Here\\u2019s the function that does the distance calculation using coordinates (longitudes and latitudes).\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"// Function takes two objects, that contain coordinates to a starting and destination location.\\nfunction calcDistance (startingCoords, destinationCoords){\\n  let startingLat = degreesToRadians(startCoords.latitude);\\n  let startingLong = degreesToRadians(startCoords.longitude);\\n  let destinationLat = degreesToRadians(destCoords.latitude);\\n  let destinationLong = degreesToRadians(destCoords.longitude);\\n\\n  // Radius of the Earth in kilometers\\n  let radius = 6571;\\n\\n  // Haversine equation\\n  let distanceInKilometers = Math.acos(Math.sin(startingLat) * Math.sin(destinationLat) +\\n  Math.cos(startingLat) * Math.cos(destinationLat) *\\n  Math.cos(startingLong - destinationLong)) * radius;\\n}\\n  return distanceInKilometers;\\n}\\n\")), mdx(\"p\", null, \"Now, you can the call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"calcDistance\"), \" function and pass it any two coordinates.\\nFor example:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"let sCoords = {\\nlatitude: 58.39343;\\nlongitude: -259.2627;\\n}\\n\\nlet dCoords = {\\nlatitude: 43.8394;\\nlongitude: -129.3984;\\n}\\nlet dist = calcDistance(sCoords, dCoords)\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;"}}},
    "staticQueryHashes": ["3128451518"]}